(function(){var b=window,i="MsgBox";if(i in b){return}var o="";var l=function(r,q){r=r||{};q=q||{};for(var s in q){if(!(s in r)){r[s]=q[s]}}return r};var f=(function(){var p=("ontouchstart" in window),r="attachEvent" in document.documentElement;var t="  __com.czzdit.plugin.touch#"+new Date().getTime()+"__  ";var u=function(w,v){w=w||{};w[v]=w[v]||{};return w[v]};var s=function(y,z,w){if(!p){y[r?"attachEvent":"addEventListener"](r?"onclick":"click",z);return}var x=u(y,t+".tap");x.callbacks=x.callbacks||[];if(x.callbacks.indexOf(z)!=-1){return}x.callbacks.push(z);w=l(w,{timespan:500,delta:{}});w.delta=l(w.delta,{x:10,y:15});var v=u(y,t+".tap.meta");if(null==v.touchstart){v.touchstart=function(A){var B=A.changedTouches[0];x.startX=B.screenX;x.startY=B.screenY;x.startTimestamp=Date.now()};y.addEventListener("touchstart",v.touchstart)}if(null==v.touchend){v.touchend=function(E){var G=E.changedTouches[0];x.stopX=G.screenX;x.stopY=G.screenY;x.stopTimestamp=Date.now();var F=x.stopTimestamp-x.startTimestamp,B=Math.abs(x.stopX-x.startX),A=Math.abs(x.stopY-x.startY);if(F<=w.timespan&&B<=w.delta.x&&A<=w.delta.y){for(var C=0;C<x.callbacks.length;C++){var D=x.callbacks[C];D&&D.call(y,E)}}};y.addEventListener("touchend",v.touchend)}};var q=function(y,z){if(!p){y[r?"detachEvent":"removeEventListener"](r?"onclick":"click",z);return}if(!y.hasOwnProperty(t)){return}var x=u(y,t+".tap");var w=x.callbacks.indexOf(z);if(w==-1){return}x.callbacks.splice(w,1);if(x.callbacks.length==0){var v=u(y,t+".tap.meta");y.removeEventListener("touchstart",v.touchstart);y.removeEventListener("touchend",v.touchend);delete y[t].tap}};return{addTapListener:s,removeTapListener:q}})();var a=function(p){return String(p)+o};var m=a("MsgBox-Mask"),k=a("MsgBox-Container");var e=[];var n=function(){return 0==e.length?null:e[e.length-1]};var g=function(t){t=l(t,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null});var q=document.createElement("div");q.className=m;if(null!=t.maskStyle){q.style.cssText=t.maskStyle}var u=document.createElement("div");u.className=k;if(null!=t.containerStyle){u.style.cssText=t.containerStyle}var s=document.createElement("div");s.className=a("title");if(null!=t.titleStyle){s.style.cssText=t.titleStyle}s.innerHTML=t.title;var r=document.createElement("div");r.className=a("content");if(null!=t.contentStyle){r.style.cssText=t.contentStyle}if(typeof t.content=="object"){r.appendChild(t.content)}else{r.innerHTML=String(t.content)}var v=document.createElement("div");v.className=a("button-container");if(null!=t.buttonContainerStyle){v.style.cssText=t.buttonContainerStyle}u.appendChild(s);u.appendChild(r);u.appendChild(v);var p=[];this.getMaskDomElement=function(){return q};this.getContainerDomElement=function(){return u};this.getTitleDomElement=function(){return s};this.getContentDomElement=function(){return r};this.getButtonContainerDomElement=function(){return v};this.getTitle=function(){return t.title};this.getContent=function(){return t.content};this.addCloseListener=function(w){if(p.indexOf(w)==-1){p.push(w)}};this.removeCloseListener=function(x){var w=p.indexOf(x);if(w==-1){return}p.splice(w,1)};this.show=function(x){if(arguments.length==0){x=true}var w=0==e.length?null:e[e.length-1];if(null!=w){w.getMaskDomElement().style.display="none";w.getContainerDomElement().style.display="none"}u.style.visibility="hidden";x&&document.body.appendChild(q);document.body.appendChild(u);u.style.left="50%";u.style.top="50%";u.style.marginLeft=(-u.offsetWidth/2)+"px";u.style.marginTop=(-u.offsetHeight/2)+"px";u.style.visibility="visible";e.push(this)};this.cancel=function(w){q.parentNode&&q.parentNode.removeChild(q);u.parentNode&&u.parentNode.removeChild(u);e.pop();if(arguments.length<1){w=true}if(w){var x=0==e.length?null:e[e.length-1];if(null!=x){x.getContainerDomElement().style.display="block";x.getMaskDomElement().style.display="block"}}};this.close=function(x,w){if(arguments.length<2){w=true}this.cancel(w);var z=this;for(var y=0;y<p.length;y++){var A=p[y];A&&A.call(z)}if(x){var z=null;while((z=n())!=null){z.close(false,false)}}};Object.freeze&&Object.freeze(this)};var c=function(q){q=l(q,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null});l(q,{confirmButtonText:null,confirmButtonStyle:null,confirmCallback:null});var r=new g(q);r.getContainerDomElement().className+=" alert";var p=document.createElement("div");p.className=a("button")+" confirm";p.style.cssText="margin-left: 1px;";if(null!=q.confirmButtonStyle){p.style.cssText=q.confirmButtonStyle}p.innerHTML=null!=q.confirmButtonText?q.confirmButtonText:"确定";f.addTapListener(p,function(s){(s.preventDefault)?s.preventDefault():(s.returnValue=false);if(q.confirmCallback){q.confirmCallback.call(r)}else{r.close()}});r.getButtonContainerDomElement().appendChild(p);return r};var h=function(q){q=l(q,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null,isCancelButtonOnTheLeft:true});
l(q,{confirmButtonText:null,confirmButtonStyle:null,confirmCallback:null,cancelButtonText:null,cancelButtonStyle:null,cancelCallback:null});var r=new g(q);r.getContainerDomElement().className+=" confirm";var p=document.createElement("div");p.className=a("button")+" confirm";if(null!=q.confirmButtonStyle){p.style.cssText=q.confirmButtonStyle}p.innerHTML=null!=q.confirmButtonText?q.confirmButtonText:"确定";f.addTapListener(p,function(t){(t.preventDefault)?t.preventDefault():(t.returnValue=false);if(q.confirmCallback){q.confirmCallback.call(r)}else{r.close()}});var s=document.createElement("div");s.className=a("button")+" cancel";if(null!=q.cancelButtonStyle){s.style.cssText=q.cancelButtonStyle}s.innerHTML=null!=q.cancelButtonText?q.cancelButtonText:"取消";f.addTapListener(s,function(t){(t.preventDefault)?t.preventDefault():(t.returnValue=false);if(q.cancelCallback){q.cancelCallback.call(r)}else{r.close()}});r.getButtonContainerDomElement().appendChild(q.isCancelButtonOnTheLeft?s:p);r.getButtonContainerDomElement().appendChild(q.isCancelButtonOnTheLeft?p:s);return r};var d=function(r){r=l(r,{title:"提示",content:"",maskStyle:null,containerStyle:null,titleStyle:null,contentStyle:null,buttonContainerStyle:null,isCancelButtonOnTheLeft:true});l(r,{cancelable:true,inputWrapperStyle:null,inputType:"text",inputStyle:null,inputDefaultValue:null,inputPlaceholder:null,confirmButtonText:null,confirmButtonStyle:null,confirmCallback:null,cancelButtonText:null,cancelButtonStyle:null,cancelCallback:null});var s=new g(r);s.getContainerDomElement().className+=!r.cancelable?" prompt not-cancelable":" prompt";var t=document.createElement("div");t.className="input-wrapper";if(null!=r.inputWrapperStyle){t.style.cssText=r.inputWrapperStyle}var q=document.createElement("input");q.type=r.inputType;q.placeholder=null!=r.inputPlaceholder?r.inputPlaceholder:"";q.value=null!=r.inputDefaultValue?r.inputDefaultValue:"";if(null!=r.inputStyle){q.style.cssText=r.inputStyle}t.appendChild(q);var p=document.createElement("div");p.className=a("button")+" confirm";if(null!=r.confirmButtonStyle){p.style.cssText=r.confirmButtonStyle}p.innerHTML=null!=r.confirmButtonText?r.confirmButtonText:"确定";f.addTapListener(p,function(v){(v.preventDefault)?v.preventDefault():(v.returnValue=false);if(r.confirmCallback){r.confirmCallback.call(s,q.value)}else{s.close()}});if(r.cancelable){var u=document.createElement("div");u.className=a("button")+" cancel";if(null!=r.cancelButtonStyle){u.style.cssText=r.cancelButtonStyle}u.innerHTML=null!=r.cancelButtonText?r.cancelButtonText:"取消";f.addTapListener(u,function(v){(v.preventDefault)?v.preventDefault():(v.returnValue=false);if(r.cancelCallback){r.cancelCallback.call(s)}else{s.close()}});s.getButtonContainerDomElement().appendChild(r.isCancelButtonOnTheLeft?u:p)}s.getContentDomElement().appendChild(t);s.getButtonContainerDomElement().appendChild((!r.cancelable||!r.isCancelButtonOnTheLeft)?p:u);return s};var j=function(p){p=l(p,{type:j.ALERT});if(p.type==j.ALERT){return c(p)}if(p.type==j.CONFIRM){return h(p)}if(p.type==j.PROMPT){return d(p)}throw new Error("Illegal MsgBox type: "+p.type)};j.getCurrentBox=n;j.closeAll=function(){n()&&n().close(true)};j.ALERT=1;j.CONFIRM=2;j.PROMPT=3;b[i]=j})();